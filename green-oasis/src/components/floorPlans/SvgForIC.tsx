import React from 'react';
import { useRouter } from 'next/navigation';
import Tippy from '@tippyjs/react';
import 'tippy.js/dist/tippy.css';
import { BuildingData } from '@/types/location';

interface SvgForICProps {
  siteId: string;
  campusId: string;
  buildingData?: BuildingData[];
}

const TooltipContent = ({ building }: { building: BuildingData }) => (
  <div className="lay_tooltip">
    <div className="dataTooltip">
      <div>
        <p className="yellow">{building.name}</p>
        <table>
          <tbody>
            <tr>
              <td className="num">
                마스터자산 : {building.masterCnt}<br />
                슬레이브자산 : {building.slaveCnt}<br />
                마스터Tracker : {building.masterTrackerCnt}<br />
                슬레이브Tracker : {building.slaveTrackerCnt}<br />
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
);

const SvgForIC: React.FC<SvgForICProps> = ({ siteId, campusId, buildingData }) => {
  const router = useRouter();

  const handleBuildingClick = (e: React.MouseEvent<HTMLAnchorElement>, buildingName: string, buildingId: string) => {
    e.preventDefault();
    router.push(`/location/${siteId}/${campusId}/${buildingId}`);
  };

  const getBuildingData = (buildingId: string) => {
    const building = buildingData?.find(b => b.key === buildingId);
    return building;
  };

  return (
    <svg xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink"
         style={{backgroundImage : "url('/images/panorama_1010.webp')", backgroundSize : 'contain', backgroundPosition : 'center', backgroundRepeat : 'no-repeat'}}
         width="2100" height="950" viewBox="0 0 1500 947" className='svgForIC'>
      <g className="skhynixWrap-ic panoramicView">  
        {/* <!-- M16 --> */}
        {getBuildingData('P140-62') && (
          <Tippy content={<TooltipContent building={getBuildingData('P140-62')!} />} placement="top" interactive={false} offset={[0, 80]}>
            <a
              href=""
              onClick={(e) => handleBuildingClick(e, 'M16', 'P140-62')}
            >  
              <polygon className="b_build" points="711 220 786 294 1023 200 1023 189.57 1016 183 1003.5 190.5 958.5 146.5 958.5 141.5 951.5 134.5 951.5 122.5 946.5 117.5 938.5 119.5 938.5 127.5 923.5 132.5 921.5 130.5 913.5 132.5 912.5 142.5 851.5 164.5 846.5 159.5 842.5 160.5 841.5 163.5 812.5 174.5 812.5 180.5 750 204.04 750 200.64 743.5 194.5 736.5 197.5 736.5 204.5 733.98 205.75 731.5 203.5 725.81 205.75 726.5 208.5 711 213.57 711 220"/>
              <polygon className="b_build" points="710 219 709 248 705 249 771 315 771 336.81 783 349 784.45 292.47 710 219" />
              <polygon className="b_build" points="784.5 293.5 1022.5 200.5 1020.5 255.5 783.5 348.5 784.5 293.5" />
              <rect className="tit_b" x="833.48" y="196.71" width="81.36" height="26.85" rx="13.42" ry="13.42"/>
              <path className="tit_build" d="M860.59,215.02v-11.86h2.62l2.02,5.57c.13.35.25.72.37,1.11.12.39.23.77.35,1.14h.08c.13-.37.25-.75.37-1.14.12-.39.23-.76.34-1.11l1.98-5.57h2.62v11.86h-2.16v-4.94c0-.38.02-.81.05-1.26.03-.46.07-.92.12-1.38.05-.46.09-.88.14-1.24h-.06l-.98,2.78-1.82,4.98h-1.36l-1.84-4.98-.94-2.78h-.06c.04.36.08.78.13,1.24.04.46.08.93.12,1.38.04.46.06.88.06,1.26v4.94h-2.13Z"/>
              <path className="tit_build" d="M874.09,215.02v-1.92h2.56v-7.15h-2.16v-1.47c.6-.12,1.11-.26,1.54-.42.43-.16.83-.35,1.21-.58h1.74v9.62h2.22v1.92h-7.12Z"/>
              <path className="tit_build" d="M887.26,215.24c-.57,0-1.1-.11-1.61-.34-.51-.22-.96-.57-1.36-1.02-.4-.46-.71-1.04-.94-1.76-.23-.71-.34-1.57-.34-2.56,0-1.11.12-2.06.37-2.85.25-.79.59-1.44,1.02-1.95.44-.51.93-.89,1.48-1.14.55-.25,1.12-.37,1.7-.37.72,0,1.36.13,1.9.4s.98.58,1.34.94l-1.26,1.41c-.2-.23-.47-.43-.8-.59-.33-.16-.67-.24-1.02-.24-.47,0-.9.14-1.29.41s-.7.73-.93,1.36-.34,1.51-.34,2.62c0,.95.09,1.71.27,2.28.18.57.43.98.74,1.24s.66.38,1.04.38c.3,0,.57-.08.82-.23.25-.15.44-.38.58-.69.14-.3.22-.68.22-1.13s-.07-.81-.21-1.09c-.14-.28-.34-.48-.59-.61-.26-.13-.55-.19-.9-.19-.32,0-.65.1-1,.3s-.67.55-.98,1.05l-.1-1.6c.22-.3.48-.55.77-.77.29-.21.59-.38.9-.49s.6-.17.86-.17c.66,0,1.25.13,1.76.38.51.26.91.65,1.21,1.18.29.53.44,1.2.44,2.01s-.17,1.45-.51,2.02c-.34.57-.79,1.01-1.35,1.33-.56.31-1.18.47-1.86.47Z"/>
            </a>
          </Tippy>
        )}

        {/* <!-- M10C --> */}
        {getBuildingData('P140-03') && (
          <Tippy content={<TooltipContent building={getBuildingData('P140-03')!} />} placement="top" interactive={false} offset={[70, 80]}>
            <a
              href=""
              onClick={(e) => handleBuildingClick(e, 'M10C', 'P140-03')}
            >
              <polygon className="b_build" points="960.5 407.5 1072.5 361.5 1072.5 358.54 1109.5 343.5 1162.5 396.5 1012.5 459.5 960.5 407.5"/>
              <polygon className="b_build" points="1012.5 459.5 1012.5 472.74 1024.5 467.5 1024.5 464.43 1028.5 462.5 1030.5 464.5 1036.5 462.5 1036.5 459.5 1045.5 458.5 1047.5 455.5 1057.5 453.5 1162.5 409.47 1162.5 396.5 1012.5 459.5"/>
              <polygon className="b_build" points="960.5 407.5 959.72 407.5 959.72 420.8 1010.9 473.5 1012.5 472.74 1012.5 459.5 960.5 407.5"/>
              <rect className="tit_b" x="1040.12" y="384.64" width="81.36" height="26.85" rx="13.42" ry="13.42"/>
              <path className="tit_build" d="M1064.23,403.95v-11.86h2.62l2.02,5.57c.13.35.25.72.37,1.11.12.39.23.77.35,1.14h.08c.13-.37.25-.75.37-1.14.12-.39.23-.76.34-1.11l1.98-5.57h2.62v11.86h-2.16v-4.94c0-.38.02-.81.05-1.26.03-.46.07-.92.12-1.38.05-.46.09-.88.14-1.24h-.06l-.98,2.78-1.82,4.98h-1.36l-1.84-4.98-.94-2.78h-.06c.04.36.09.78.13,1.24.04.46.08.93.12,1.38.04.46.06.88.06,1.26v4.94h-2.13Z"/>
              <path className="tit_build" d="M1077.73,403.95v-1.92h2.56v-7.15h-2.16v-1.47c.6-.12,1.11-.26,1.54-.42.43-.16.83-.35,1.21-.58h1.74v9.62h2.22v1.92h-7.12Z"/>
              <path className="tit_build" d="M1090.58,404.17c-.81,0-1.52-.23-2.12-.7-.6-.46-1.07-1.14-1.4-2.04-.33-.9-.5-1.99-.5-3.3s.17-2.41.5-3.29c.33-.88.8-1.54,1.4-1.99.6-.45,1.31-.67,2.12-.67s1.52.22,2.12.67c.6.45,1.07,1.11,1.4,1.99.33.88.5,1.98.5,3.29s-.17,2.4-.5,3.3c-.33.9-.8,1.58-1.4,2.04-.6.46-1.31.7-2.12.7ZM1090.58,402.33c.35,0,.66-.12.93-.38.27-.25.47-.68.62-1.3.15-.61.22-1.45.22-2.52s-.08-1.91-.22-2.51c-.15-.6-.36-1.01-.62-1.25s-.58-.35-.93-.35c-.33,0-.63.12-.9.35s-.49.65-.65,1.25c-.16.6-.24,1.43-.24,2.51s.08,1.91.24,2.52c.16.61.38,1.05.65,1.3.27.25.57.38.9.38Z"/>
              <path className="tit_build" d="M1101.58,404.17c-.75,0-1.45-.13-2.1-.39s-1.22-.65-1.72-1.18c-.5-.52-.89-1.16-1.17-1.92-.28-.76-.42-1.63-.42-2.61s.14-1.85.43-2.62.69-1.41,1.19-1.94c.51-.53,1.09-.94,1.76-1.22.67-.28,1.37-.42,2.12-.42s1.43.15,2.02.46c.59.3,1.08.66,1.45,1.06l-1.23,1.5c-.3-.3-.63-.54-.98-.72-.36-.18-.76-.27-1.21-.27-.6,0-1.13.16-1.61.49-.47.33-.84.79-1.11,1.4s-.4,1.34-.4,2.19.12,1.6.38,2.22.61,1.09,1.07,1.42,1,.5,1.62.5c.51,0,.97-.11,1.37-.33.4-.22.75-.5,1.06-.84l1.26,1.47c-.49.58-1.05,1.01-1.68,1.3-.63.29-1.33.44-2.11.44Z"/>
            </a>
          </Tippy>
        )}

        {/* <!-- M10A --> */}
        {getBuildingData('P140-01') && (
          <Tippy content={<TooltipContent building={getBuildingData('P140-01')!} />} placement="top" interactive={false} offset={[0, 80]}>
            <a
              href=""
              onClick={(e) => handleBuildingClick(e, 'M10A', 'P140-01')}
            >
              <path id="M10A_x5F_area" className="b_build" d="M482.95,457.12l-60.2-68.07s-1.8-3.19,4.81-5.93l31.83-12.1-.1-15.97,142.78-55.53v-3.93l30.24-12.47,11.12,11.53,2.31-1.36,7.73,7.46,2.44-.27,48.31,52.51-.41,29.19-16.8-17.54-10.27,6-2.03-2.54-10.54,5.42.31,1.83-8.54,3.36.2,1.73-4.07,1.83-8.14-8.85.2-5.29-6.41-5.39-5.9,3.97.1,5.9-7.12,2.54-.14,3.49-11.93,10.58-2.44.95-52.47,19.8-3.8-5.97-14.51,8,.14-5.97-7.19-3.25-5.42,3.39-.41,6.78-4.88,1.63.41,40.14-2.85,1.9-10.03-12.07-7.59,3.39.81,1.9-19.54,7.31Z"/>
              <rect id="" className="tit_b" x="535.73" y="338.01" width="89.49" height="29.53" rx="14.77" ry="14.77"/>
              <path className="tit_build" d="M548.71,358.14v-11.86h2.62l2.02,5.57c.13.35.25.72.37,1.11.12.39.23.77.35,1.14h.08c.13-.37.25-.75.37-1.14.12-.39.23-.76.34-1.11l1.98-5.57h2.62v11.86h-2.16v-4.94c0-.38.02-.81.05-1.26.03-.46.07-.92.12-1.38.05-.46.09-.88.14-1.24h-.06l-.98,2.78-1.82,4.98h-1.36l-1.84-4.98-.94-2.78h-.06c.04.36.09.78.13,1.24.04.46.08.93.12,1.38.04.46.06.88.06,1.26v4.94h-2.13Z"/>
              <path className="tit_build" d="M562.22,358.14v-1.92h2.56v-7.15h-2.16v-1.47c.6-.12,1.11-.26,1.54-.42.43-.16.83-.35,1.21-.58h1.74v9.62h2.22v1.92h-7.12Z"/>
              <path className="tit_build" d="M575.07,358.37c-.81,0-1.52-.23-2.12-.7-.6-.46-1.07-1.14-1.4-2.04-.33-.9-.5-1.99-.5-3.3s.17-2.41.5-3.29c.33-.88.8-1.54,1.4-1.99.6-.45,1.31-.67,2.12-.67s1.52.22,2.12.67c.6.45,1.07,1.11,1.4,1.99.33.88.5,1.98.5,3.29s-.17,2.4-.5,3.3c-.33.9-.8,1.58-1.4,2.04-.6.46-1.31.7-2.12.7ZM575.07,356.53c.35,0,.66-.12.93-.38.27-.25.47-.68.62-1.3.15-.61.22-1.45.22-2.52s-.07-1.91-.22-2.51c-.15-.6-.36-1.01-.62-1.25s-.58-.35-.93-.35c-.33,0-.63.12-.9.35s-.49.65-.65,1.25c-.16.6-.24,1.43-.24,2.51s.08,1.91.24,2.52c.16.61.38,1.05.65,1.3.27.25.57.38.9.38Z"/>
              <path className="tit_build" d="M579.72,358.14l3.79-11.86h2.8l3.79,11.86h-2.5l-1.68-6.18c-.18-.62-.35-1.26-.52-1.93-.17-.67-.34-1.31-.52-1.94h-.06c-.15.64-.31,1.29-.49,1.95-.18.66-.35,1.3-.52,1.92l-1.7,6.18h-2.4ZM582.07,355.1v-1.84h5.63v1.84h-5.63Z"/>
              <path className="tit_build" d="M590.27,361.04l3.98-15.79h1.55l-3.97,15.79h-1.57Z"/>
              <path className="tit_build" d="M597.69,358.14v-11.86h4.11c.84,0,1.6.11,2.27.33.67.22,1.21.59,1.6,1.12.39.53.59,1.25.59,2.15s-.2,1.59-.59,2.15-.93.97-1.6,1.23c-.67.26-1.43.39-2.27.39h-1.74v4.48h-2.37ZM600.06,351.79h1.54c.77,0,1.35-.16,1.75-.48.4-.32.6-.79.6-1.42s-.2-1.09-.6-1.34c-.4-.25-.98-.38-1.75-.38h-1.54v3.62ZM604.12,358.14l-2.75-5.09,1.66-1.47,3.74,6.56h-2.66Z"/>
              <path className="tit_build" d="M607.83,358.14v-1.36c1.02-.98,1.92-1.87,2.69-2.66s1.37-1.52,1.79-2.18c.43-.66.64-1.27.64-1.83,0-.39-.07-.73-.21-1.01-.14-.28-.34-.49-.6-.64-.26-.15-.58-.22-.97-.22-.43,0-.82.12-1.18.37-.36.25-.69.53-.98.85l-1.31-1.28c.55-.59,1.12-1.03,1.7-1.34.58-.3,1.27-.46,2.07-.46.75,0,1.4.15,1.96.45.56.3.99.72,1.3,1.26.31.54.46,1.17.46,1.9,0,.66-.18,1.34-.55,2.03-.37.69-.85,1.39-1.46,2.1-.6.71-1.26,1.44-1.98,2.18.3-.04.63-.08.99-.1.36-.03.68-.04.96-.04h2.59v1.98h-7.94Z"/>
            </a>
          </Tippy>
        )}

        {/* <!-- M14 --> */}
        {getBuildingData('P140-40') && (
          <Tippy content={<TooltipContent building={getBuildingData('P140-40')!} />} placement="top" interactive={false} offset={[50, 60]}>
            <a
              href=""
              onClick={(e) => handleBuildingClick(e, 'M14', 'P140-40')}
            >
              <polygon className="b_build" points="522.58 459.55 522.58 414.22 527.11 412.28 527.37 406.32 534.62 403.21 538.9 407.49 538.98 411.63 541.64 410.57 546.37 415.69 614.16 387.65 623.55 377.68 624.32 375.03 630.99 372.24 630.99 366.22 637.01 362.79 643.62 367.91 643.75 373.6 652.81 381.85 664.47 374.68 664.51 372.27 674.96 367.95 677.24 370.06 687.6 364.24 756.91 435.72 756.6 463.95 756.37 478.19 747.82 482.34 778.51 514.06 781.83 513.65 789.8 521.83 793.62 519.72 796.47 523.73 795.43 582.78 795.43 589.26 673.7 640.02 586.55 544.19 586.55 528.93 581.05 523 578.72 520.5 579.75 519.46 569.48 508.24 568.27 509.1 564.13 503.83 562.06 503.57 558.69 500.64 558.86 497.7 522.58 459.55"/>
              <rect className="tit_b" x="631.31" y="467.63" width="81.36" height="26.85" rx="13.42" ry="13.42"/>
              <path className="tit_build" d="M658.42,485.93v-11.86h2.62l2.02,5.57c.13.35.25.72.37,1.11s.23.77.35,1.14h.08c.13-.37.25-.75.37-1.14s.23-.76.34-1.11l1.98-5.57h2.62v11.86h-2.16v-4.94c0-.38.02-.81.05-1.26.03-.46.07-.92.12-1.38s.09-.88.14-1.24h-.06l-.98,2.78-1.82,4.98h-1.36l-1.84-4.98-.94-2.78h-.06c.04.36.09.78.13,1.24.04.46.08.93.12,1.38.04.46.06.88.06,1.26v4.94h-2.13Z"/>
              <path className="tit_build" d="M671.92,485.93v-1.92h2.56v-7.15h-2.16v-1.47c.6-.12,1.11-.26,1.54-.42.43-.16.83-.35,1.21-.58h1.74v9.62h2.22v1.92h-7.12Z"/>
              <path className="tit_build" d="M685.44,485.93v-6.96c0-.35.01-.77.03-1.25.02-.48.04-.9.06-1.25h-.08c-.14.31-.29.62-.45.93s-.33.62-.5.94l-1.84,2.91h6.37v1.81h-8.66v-1.62l4.42-7.06h2.83v11.54h-2.19Z"/>
            </a>
          </Tippy>
        )}
      </g>  
    </svg>
  );
};

export default SvgForIC;
